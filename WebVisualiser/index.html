<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8"/>
    
    <title>Demo</title>

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="zenid-visualizer.js" type="text/javascript"></script>

    <style type="text/css">
        .camera-preview {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
        }
        .camera-preview canvas {
            width: 100%;
            height: 100%;
            max-width: 100%;
            max-height: 100%;
            display: inline-block;
            vertical-align: middle;
        }
    </style>
</head>
<body class="camera-preview">
<canvas></canvas>

<script type="text/javascript">
    // Create a visualizer with options
    const visualizer = new Visualizer({
        // Let Zenid draw the feedback text. Set to false if we want to display feedback ourselves.
        drawText: true,
        // See https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/font for font syntax.
        font: "24px sans-serif"
    });
    
    window.lastTimestamp = -1;

    var width = window.innerWidth;
    var height = window.innerHeight;
    var canvas = document.getElementsByTagName("canvas")[0]
    canvas.setAttribute("width", width);
    canvas.setAttribute("height", height);
    canvas.setAttribute("style", "position: fixed; top:0; left:0; height: "+width+" ;");

    function drawCommands(renderCommands) {
        var renderCommands = renderCommands.replace("\\n", "");
        var ageMs = 0;

        if (window.lastTimestamp != null) {
            ageMs = Date.now() - window.lastTimestamp;
        }
        const canvas = document.getElementsByTagName("canvas")[0]
        
        visualizer.drawOverlay(canvas, ageMs, renderCommands);
        window.lastTimestamp = Date.now();
    }
</script>
</body>
</html>
